{"name": "test_apply_promo_code_3", "status": "broken", "statusDetails": {"message": "AttributeError: 'str' object has no attribute 'scheme'", "trace": "self = <final_work.TestValidate object at 0x000002636BB74620>\nget_driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"3787d8a0ed087774a77827c0e8d58b43\")>\n\n    def test_apply_promo_code_3(self, get_driver):\n        with allure.step('Переход на страницу https://pizzeria.skillbox.cc/'):\n            get_driver.get('https://pizzeria.skillbox.cc/')\n            time.sleep(3)\n        with allure.step('Добавить пиццу \"Ветчина и грибы\" в \"Корзину\"'):\n            add_pizza(get_driver)\n            time.sleep(3)\n        with allure.step('Перейдите в окно оформления товаров.'):\n            get_driver.find_element(By.XPATH, '//*[@class=\"cart-contents wcmenucart-contents\"]').click()\n            time.sleep(3)\n        with allure.step('Примените промокод GIVEMEHALYAVA.'):\n            get_driver.find_element(By.CSS_SELECTOR, '#coupon_code').send_keys('GIVEMEHALYAVA')\n            time.sleep(3)\n        with allure.step('Перехватите запрос, уходящий с веба на сервер, и заблокируйте его. Вернуть ответ с ошибкой (500).'):\n            # noinspection PyTypeChecker\n>           proxy.connection_requires_http_tunnel('http://pizzeria.skillbox.cc/api/apply-promo', 500)\n\nfinal_work.py:270: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nproxy_url = 'http://pizzeria.skillbox.cc/api/apply-promo', proxy_config = 500\ndestination_scheme = None\n\n    def connection_requires_http_tunnel(\n        proxy_url: Url | None = None,\n        proxy_config: ProxyConfig | None = None,\n        destination_scheme: str | None = None,\n    ) -> bool:\n        \"\"\"\n        Returns True if the connection requires an HTTP CONNECT through the proxy.\n    \n        :param URL proxy_url:\n            URL of the proxy.\n        :param ProxyConfig proxy_config:\n            Proxy configuration from poolmanager.py\n        :param str destination_scheme:\n            The scheme of the destination. (i.e https, http, etc)\n        \"\"\"\n        # If we're not using a proxy, no way to use a tunnel.\n        if proxy_url is None:\n            return False\n    \n        # HTTP destinations never require tunneling, we always forward.\n        if destination_scheme == \"http\":\n            return False\n    \n        # Support for forwarding with HTTPS proxies and HTTPS destinations.\n        if (\n>           proxy_url.scheme == \"https\"\n            and proxy_config\n            and proxy_config.use_forwarding_for_https\n        ):\nE       AttributeError: 'str' object has no attribute 'scheme'\n\n..\\..\\..\\..\\miniconda3\\Lib\\site-packages\\urllib3\\util\\proxy.py:36: AttributeError"}, "steps": [{"name": "Переход на страницу https://pizzeria.skillbox.cc/", "status": "passed", "start": 1737040442039, "stop": 1737040449863}, {"name": "Добавить пиццу \"Ветчина и грибы\" в \"Корзину\"", "status": "passed", "start": 1737040449863, "stop": 1737040464450}, {"name": "Перейдите в окно оформления товаров.", "status": "passed", "start": 1737040464450, "stop": 1737040468384}, {"name": "Примените промокод GIVEMEHALYAVA.", "status": "passed", "start": 1737040468384, "stop": 1737040471487}, {"name": "Перехватите запрос, уходящий с веба на сервер, и заблокируйте его. Вернуть ответ с ошибкой (500).", "status": "broken", "statusDetails": {"message": "AttributeError: 'str' object has no attribute 'scheme'\n", "trace": "  File \"C:\\Users\\Serjan777\\PycharmProjects\\pythonProject\\Tests\\homework\\final_work.py\", line 270, in test_apply_promo_code_3\n    proxy.connection_requires_http_tunnel('http://pizzeria.skillbox.cc/api/apply-promo', 500)\n  File \"C:\\Users\\Serjan777\\miniconda3\\Lib\\site-packages\\urllib3\\util\\proxy.py\", line 36, in connection_requires_http_tunnel\n    proxy_url.scheme == \"https\"\n    ^^^^^^^^^^^^^^^^\n"}, "start": 1737040471487, "stop": 1737040471487}], "attachments": [{"name": "log", "source": "8a765082-7a3c-4c7d-a62d-18e2fd1773a9-attachment.txt", "type": "text/plain"}], "start": 1737040442038, "stop": 1737040471495, "uuid": "b5549aef-468e-4d6f-82f6-594790393d29", "historyId": "4d3e7211570903f0b6223686b47abcb9", "testCaseId": "4d3e7211570903f0b6223686b47abcb9", "fullName": "Tests.homework.final_work.TestValidate#test_apply_promo_code_3", "labels": [{"name": "story", "value": "Waiting page load"}, {"name": "feature", "value": "Full Accounts"}, {"name": "parentSuite", "value": "Tests.homework"}, {"name": "suite", "value": "final_work"}, {"name": "subSuite", "value": "TestValidate"}, {"name": "host", "value": "Admin"}, {"name": "thread", "value": "7728-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Tests.homework.final_work"}]}