{"name": "test_apply_promo_code_3", "status": "failed", "statusDetails": {"message": "AssertionError: assert '450,00' in '405,00₽'\n +  where '405,00₽' = <selenium.webdriver.remote.webelement.WebElement (session=\"5554724059e530e98e3d8d9985fb4d3b\", element=\"f.6E2C7593A1D4E96C90D76A58C24654B3.d.63AC7370031AE934DBB1F5AACC3712D5.e.53\")>.text", "trace": "self = <final_work.TestValidate object at 0x000001FF8B8A67E0>\nget_driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"5554724059e530e98e3d8d9985fb4d3b\")>\n\n    def test_apply_promo_code_3(self, get_driver):\n        server = Server(\n            r\"C:\\Program Files (x86)\\browsermob-proxy-2.1.4-bin\\browsermob-proxy-2.1.4\\bin\\browsermob-proxy.bat\")\n        server.start()\n        time.sleep(3)\n        proxy = server.create_proxy()\n        options = webdriver.ChromeOptions()\n        options.add_argument(f'--proxy-server={proxy.proxy}')\n        service = Service(executable_path=ChromeDriverManager().install())\n        driver = webdriver.Chrome(service=service, options=options)\n        proxy.new_har(\"500\", options={'captureHeaders': True, 'captureContent': True})\n        with allure.step('Переход на страницу https://pizzeria.skillbox.cc/'):\n            get_driver.get(\"https://pizzeria.skillbox.cc/\")\n            time.sleep(10)\n        with allure.step('Добавить пиццу \"Ветчина и грибы\" в \"Корзину\"'):\n            get_driver.find_element(By.XPATH, '(//*[contains(@data-product_id, \"419\")])[2]').click()\n            time.sleep(3)\n        with allure.step('Перейти в \"Корзину\".'):\n            get_driver.find_element(By.XPATH, '//*[@class=\"cart-contents wcmenucart-contents\"]').click()\n            time.sleep(3)\n        with allure.step('Применить промокод GIVEMEHALYAVA.'):\n            get_driver.find_element(By.CSS_SELECTOR, '#coupon_code').send_keys('GIVEMEHALYAVA')\n            time.sleep(3)\n            get_driver.find_element(By.XPATH, '//*[@name=\"apply_coupon\"]').click()\n            time.sleep(3)\n        with allure.step('Перехватить запрос с ошибкой \"500\".'):\n            for entry in proxy.har['log']['entries']:\n                request_url = entry['request']['url']\n                if 'pizzeria.skillbox.cc/cart' in request_url:\n                    proxy.rewrite_url(request_url, \"https://pizzeria.skillbox.cc/cart/500\")\n                    proxy.add_header(request_url, \"HTTP/1.1 500 Internal Server Error\")\n        with allure.step('Убедитесь, что конечная сумма заказа НЕ уменьшилась на 10%.'):\n            price = get_driver.find_element(By.XPATH, '//td/strong/span/bdi')\n>           assert '450,00' in price.text\nE           assert '450,00' in '405,00₽'\nE            +  where '405,00₽' = <selenium.webdriver.remote.webelement.WebElement (session=\"5554724059e530e98e3d8d9985fb4d3b\", element=\"f.6E2C7593A1D4E96C90D76A58C24654B3.d.63AC7370031AE934DBB1F5AACC3712D5.e.53\")>.text\n\nfinal_work.py:284: AssertionError"}, "steps": [{"name": "Переход на страницу https://pizzeria.skillbox.cc/", "status": "passed", "start": 1739031504395, "stop": 1739031516655}, {"name": "Добавить пиццу \"Ветчина и грибы\" в \"Корзину\"", "status": "passed", "start": 1739031516655, "stop": 1739031519809}, {"name": "Перейти в \"Корзину\".", "status": "passed", "start": 1739031519809, "stop": 1739031525155}, {"name": "Применить промокод GIVEMEHALYAVA.", "status": "passed", "start": 1739031525155, "stop": 1739031531594}, {"name": "Перехватить запрос с ошибкой \"500\".", "status": "passed", "start": 1739031531594, "stop": 1739031533544}, {"name": "Убедитесь, что конечная сумма заказа НЕ уменьшилась на 10%.", "status": "failed", "statusDetails": {"message": "AssertionError: assert '450,00' in '405,00₽'\n +  where '405,00₽' = <selenium.webdriver.remote.webelement.WebElement (session=\"5554724059e530e98e3d8d9985fb4d3b\", element=\"f.6E2C7593A1D4E96C90D76A58C24654B3.d.63AC7370031AE934DBB1F5AACC3712D5.e.53\")>.text\n", "trace": "  File \"C:\\Users\\Serjan777\\PycharmProjects\\pythonProject\\Tests\\homework\\final_work.py\", line 284, in test_apply_promo_code_3\n    assert '450,00' in price.text\n"}, "start": 1739031533544, "stop": 1739031533826}], "attachments": [{"name": "log", "source": "20f8ca41-9dda-400c-afdc-009bf042bb59-attachment.txt", "type": "text/plain"}], "start": 1739031497919, "stop": 1739031533828, "uuid": "9f915b05-e018-47ed-a0ad-3c8140342f86", "historyId": "4d3e7211570903f0b6223686b47abcb9", "testCaseId": "4d3e7211570903f0b6223686b47abcb9", "fullName": "Tests.homework.final_work.TestValidate#test_apply_promo_code_3", "labels": [{"name": "feature", "value": "Full Accounts"}, {"name": "story", "value": "Waiting page load"}, {"name": "parentSuite", "value": "Tests.homework"}, {"name": "suite", "value": "final_work"}, {"name": "subSuite", "value": "TestValidate"}, {"name": "host", "value": "Admin"}, {"name": "thread", "value": "7036-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Tests.homework.final_work"}]}