{"name": "test_apply_promo_code_3", "status": "failed", "statusDetails": {"message": "AssertionError: assert '450,00' in '405,00₽'\n +  where '405,00₽' = <selenium.webdriver.remote.webelement.WebElement (session=\"442fe1859c6d31759043eabdf4147ff5\", element=\"f.66EFED45CAE51A548A689FC57C69410E.d.8650D289D2BCABAC52322720D4C62DBC.e.47\")>.text", "trace": "self = <final_work.TestValidate object at 0x000001AC9E3A0AD0>\nget_driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"442fe1859c6d31759043eabdf4147ff5\")>\n\n    def test_apply_promo_code_3(self, get_driver):\n        server = Server(\n            r\"C:\\Program Files (x86)\\browsermob-proxy-2.1.4-bin\\browsermob-proxy-2.1.4\\bin\\browsermob-proxy.bat\")\n        server.start()\n        time.sleep(3)\n        proxy = server.create_proxy()\n        options = webdriver.ChromeOptions()\n        options.add_argument(f'--proxy-server={proxy.proxy}')\n        service = Service(executable_path=ChromeDriverManager().install())\n        driver = webdriver.Chrome(service=service, options=options)\n        proxy.new_har(\"500\", options={'captureHeaders': True, 'captureContent': True})\n        with allure.step('Переход на страницу https://pizzeria.skillbox.cc/'):\n            get_driver.get(\"https://pizzeria.skillbox.cc/\")\n            time.sleep(10)\n        with allure.step('Добавить пиццу \"Ветчина и грибы\" в \"Корзину\"'):\n            get_driver.find_element(By.XPATH, '(//*[contains(@data-product_id, \"419\")])[2]').click()\n            time.sleep(3)\n        with allure.step('Перейти в \"Корзину\".'):\n            get_driver.find_element(By.XPATH, '//*[@class=\"cart-contents wcmenucart-contents\"]').click()\n            time.sleep(3)\n        with allure.step('Применить промокод GIVEMEHALYAVA.'):\n            get_driver.find_element(By.CSS_SELECTOR, '#coupon_code').send_keys('GIVEMEHALYAVA')\n            time.sleep(3)\n            get_driver.find_element(By.XPATH, '//*[@name=\"apply_coupon\"]').click()\n            time.sleep(3)\n        with allure.step('Перехватить запрос с ошибкой \"500\".'):\n            for entry in proxy.har['log']['entries']:\n                request_url = entry['request']['url']\n                if 'pizzeria.skillbox.cc/cart' in request_url:\n                    proxy.rewrite_url(request_url, \"https://pizzeria.skillbox.cc/cart/500\")\n                    proxy.add_header(request_url, \"HTTP/1.1 500 Internal Server Error\")\n        with allure.step('Убедитесь, что конечная сумма заказа НЕ уменьшилась на 10%.'):\n            price = get_driver.find_element(By.XPATH, '//td/strong/span/bdi')\n>           assert '450,00' in price.text\nE           assert '450,00' in '405,00₽'\nE            +  where '405,00₽' = <selenium.webdriver.remote.webelement.WebElement (session=\"442fe1859c6d31759043eabdf4147ff5\", element=\"f.66EFED45CAE51A548A689FC57C69410E.d.8650D289D2BCABAC52322720D4C62DBC.e.47\")>.text\n\nfinal_work.py:284: AssertionError"}, "steps": [{"name": "Переход на страницу https://pizzeria.skillbox.cc/", "status": "passed", "start": 1739035198405, "stop": 1739035214589}, {"name": "Добавить пиццу \"Ветчина и грибы\" в \"Корзину\"", "status": "passed", "start": 1739035214589, "stop": 1739035217686}, {"name": "Перейти в \"Корзину\".", "status": "passed", "start": 1739035217686, "stop": 1739035221698}, {"name": "Применить промокод GIVEMEHALYAVA.", "status": "passed", "start": 1739035221698, "stop": 1739035227874}, {"name": "Перехватить запрос с ошибкой \"500\".", "status": "passed", "start": 1739035227874, "stop": 1739035227884}, {"name": "Убедитесь, что конечная сумма заказа НЕ уменьшилась на 10%.", "status": "failed", "statusDetails": {"message": "AssertionError: assert '450,00' in '405,00₽'\n +  where '405,00₽' = <selenium.webdriver.remote.webelement.WebElement (session=\"442fe1859c6d31759043eabdf4147ff5\", element=\"f.66EFED45CAE51A548A689FC57C69410E.d.8650D289D2BCABAC52322720D4C62DBC.e.47\")>.text\n", "trace": "  File \"C:\\Users\\Serjan777\\PycharmProjects\\pythonProject\\Tests\\homework\\final_work.py\", line 284, in test_apply_promo_code_3\n    assert '450,00' in price.text\n"}, "start": 1739035227884, "stop": 1739035227938}], "attachments": [{"name": "log", "source": "9fbccdef-b316-4843-83e1-293295234671-attachment.txt", "type": "text/plain"}], "start": 1739035185912, "stop": 1739035227938, "uuid": "af7a6ddc-d7a8-4e55-8a18-345fd86f3763", "historyId": "4d3e7211570903f0b6223686b47abcb9", "testCaseId": "4d3e7211570903f0b6223686b47abcb9", "fullName": "Tests.homework.final_work.TestValidate#test_apply_promo_code_3", "labels": [{"name": "story", "value": "Waiting page load"}, {"name": "feature", "value": "Full Accounts"}, {"name": "parentSuite", "value": "Tests.homework"}, {"name": "suite", "value": "final_work"}, {"name": "subSuite", "value": "TestValidate"}, {"name": "host", "value": "Admin"}, {"name": "thread", "value": "20860-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "Tests.homework.final_work"}]}